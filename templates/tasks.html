{% extends "base.html" %}
{% block content %}

<div class="page">

    <h1>All available tasks</h1>
    <p>Browse the latest local jobs posted on JobDash.</p>

    {% if tasks|length == 0 %}
        <div class="task-empty">
            <strong>No tasks yet.</strong> Be the first to 
            <a href="/post_job">post a job</a>.
        </div>
    {% else %}
        <div class="task-list">
            {% for task in tasks %}
                <div class="task-card">
                    <h2>{{ task.title }}</h2>

                    <p class="task-location">{{ task.location }}</p>

                    <p class="task-pay">${{ task.pay }}</p>

                    <div class="task-tags">
                        <span>{{ task.category }}</span>
                        <span>{{ task.date }}</span>
                    </div>

                    <a href="/task/{{ task.id }}" class="task-btn">View details</a>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>

<style>
.page {
    max-width: 1000px;
    margin: 80px auto;
    padding: 0 20px;
}

/* Barre vide si pas de tasks */
.task-empty {
    background: #ffffffdd;
    padding: 20px 30px;
    border-radius: 20px;
    font-size: 17px;
}

/* Grille des cartes */
.task-list {
    margin-top: 25px;
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
}

/* Carte moderne */
.task-card {
    background: #0d101c;
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    color: white;
}

.task-card h2 {
    margin: 0;
    font-size: 22px;
    font-weight: 700;
}

.task-location {
    color: #c9d1d9;
    margin-top: 5px;
}

.task-pay {
    color: #00ff66;
    font-size: 20px;
    font-weight: 700;
    margin: 10px 0;
}

.task-tags span {
    background: #1f6feb;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 13px;
    margin-right: 8px;
}

.task-btn {
    display: inline-block;
    margin-top: 15px;
    padding: 10px 18px;
    border-radius: 12px;
    border: 1px solid white;
    color: white;
    text-decoration: none;
}
.task-btn:hover {
    background: white;
    color: #0d101c;
}
</style>

<a class="apply-btn"
   href="https://wa.me/TON_NUMERO?text=Hi%20I%20want%20to%20apply%20for%20{{ task.title|urlencode }}">
  Apply
</a>

{% endblock %}
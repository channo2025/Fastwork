{% extends "base.html" %}

{% block content %}
<section class="page">
  <div class="container">
    <div class="page-head">
      <h1>Tasks</h1>
      <p class="muted">Browse available jobs and apply in seconds.</p>
    </div>

    {% if tasks and tasks|length > 0 %}
      <div class="tasks-grid">
        {% for task in tasks %}
          <article class="task-card">
            <div class="task-top">
              <h3 class="task-title">{{ task.title }}</h3>
              <span class="task-pay">${{ task.pay }}</span>
            </div>
            <div class="task-meta">
              <span>{{ task.city }}</span> · <span>{{ task.when }}</span>
            </div>
            <div class="task-actions">
              <a class="btn btn-primary" href="{{ url_for('apply', task_id=task.id) }}">Apply</a>
              <a class="btn btn-ghost" href="{{ url_for('job_detail', job_id=task.id) }}">View</a>
            </div>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <div class="empty">
        <h3>No tasks right now</h3>
        <p class="muted">New tasks will appear here as soon as they’re posted.</p>
        <a class="btn btn-primary" href="{{ url_for('post_job') }}">Post a job</a>
      </div>
    {% endif %}
  </div>
</section>

<style>
  .page { padding: 40px 0; }
  .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
  .page-head { margin-bottom: 18px; }
  .muted { opacity: .75; }
  .tasks-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 14px;
    margin-top: 14px;
  }
  .task-card {
    background: rgba(255,255,255,.10);
    border: 1px solid rgba(255,255,255,.14);
    border-radius: 16px;
    padding: 16px;
    backdrop-filter: blur(8px);
  }
  .task-top { display:flex; justify-content:space-between; gap:10px; align-items:flex-start; }
  .task-title { margin:0; font-size:16px; line-height:1.2; }
  .task-pay { font-weight:700; padding:6px 10px; border-radius:999px; background: rgba(255,255,255,.16); }
  .task-meta { margin-top:8px; font-size:13px; opacity:.8; }
  .task-actions { display:flex; gap:10px; margin-top:14px; }
  .btn { display:inline-flex; align-items:center; justify-content:center; padding:10px 14px; border-radius:999px; text-decoration:none; font-weight:600; }
  .btn-primary { background:#0b5cff; color:white; }
  .btn-ghost { border:1px solid rgba(255,255,255,.25); color:white; }
  .empty { padding: 18px; border-radius: 16px; border: 1px dashed rgba(255,255,255,.25); }
  @media (max-width: 900px) { .tasks-grid { grid-template-columns: repeat(2, 1fr); } }
  @media (max-width: 560px) { .tasks-grid { grid-template-columns: 1fr; } }
</style>
{% endblock %}
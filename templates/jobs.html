{% extends "base.html" %}
{% block title %}Jobs – Win-Win Job{% endblock %}

{% block body %}
<section class="container">
  <div class="card card--pad">
    <h1 class="h2">Jobs</h1>
    <p class="muted">Search and filter available jobs.</p>

    <form class="searchbar" action="/jobs" method="get" style="margin-top:14px;">
      <input class="input" name="q" value="{{ q }}" placeholder="Keyword (moving, cleaning…)" />
      <input class="input" name="city" value="{{ city }}" placeholder="City or ZIP" />
      <select class="input" name="category">
        <option value="">All categories</option>
        {% for name, icon in categories %}
          <option value="{{ name }}" {% if category==name %}selected{% endif %}>{{ icon }} {{ name }}</option>
        {% endfor %}
      </select>
      <button class="btn btn--primary" type="submit">Search</button>
    </form>
  </div>

  <div style="height:16px;"></div>

  {% if jobs|length == 0 %}
    <div class="card card--pad">
      <p class="muted">No jobs found. Try a different search, or <a class="link" href="/post">post a job</a>.</p>
    </div>
  {% else %}
    <div class="list">
      {% for j in jobs %}
        <div class="card card--pad job">
          <div class="job__top">
            <div>
              <div class="job__title">{{ j.title }}</div>
              <div class="muted">{{ j.city }} • {{ j.category }}</div>
            </div>
            <div class="pill">${{ j.pay }}</div>
          </div>
          <div class="job__desc">{{ j.description }}</div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</section>
{% endblock %}
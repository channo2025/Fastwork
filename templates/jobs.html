{% extends "base.html" %}
{% block content %}
<section class="page">
  <h1 class="h1">Browse jobs</h1>
  <p class="muted">Search local jobs and apply in minutes.</p>

  <form class="searchbar" method="get" action="/jobs">
    <input class="input" name="q" placeholder="Search jobs (e.g., moving, cleaning)" value="{{ q or '' }}">
    <input class="input" name="city" placeholder="City or ZIP" value="{{ city or '' }}">
    <button class="btn btn-primary" type="submit">Search</button>
    <a class="btn btn-ghost" href="/jobs">Reset</a>
  </form>

  {% if not jobs %}
    <div class="card empty">
      <div class="empty-title">No jobs found</div>
      <div class="muted">Try a different keyword or city.</div>
      <div style="margin-top:12px;">
        <a class="btn btn-primary" href="/post">Post a job</a>
      </div>
    </div>
  {% else %}
    <div class="grid">
      {% for j in jobs %}
        <div class="card job-card">
          <div class="job-top">
            <div>
              <div class="job-title">{{ j.title }}</div>
              <div class="job-meta">{{ j.city }} • {{ j.category }} • <b>${{ j.pay_amount }}</b> ({{ j.pay_type }})</div>
            </div>
            {% if j.is_urgent %}
              <span class="badge">Today</span>
            {% endif %}
          </div>

          <div class="job-desc">
            {{ (j.description or "No description.")[:170] }}{% if j.description and j.description|length > 170 %}…{% endif %}
          </div>

          <div class="job-actions">
            <a class="btn btn-primary" href="/jobs/{{ j.id }}">View details</a>
            <a class="btn btn-ghost" href="/jobs/{{ j.id }}#apply">Apply</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</section>
{% endblock %}